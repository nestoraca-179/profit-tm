@{
    ViewData["Title"] = "Dashboard";
    ViewData["home"] = Session["home"];
}
<header class="container-fluid">
    <div class="row" style="height: 60px;">
        <div class="col-sm-2 header-left-side text-white">
            <i class="fas fa-bars icon-menu" id="icon-menu"></i>
            <a href="/Home/@ViewData["home"]">Profit Plus TM</a>
        </div>
        <div class="col-sm-10 header-right-side">
            <div class="user-active" role="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="fas fa-user icon-user"></i>
                <p class="mb-0">@ViewBag.user.Descrip</p>
            </div>
            <div style="width: 225px; text-align: center;" class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a style="text-align: center; text-decoration: none;" href="/Account/Logout">Cerrar Sesión</a>
            </div>
        </div>
    </div>
</header>
<div class="container-fluid p-0">
    <div class="dash-container" id="dash-container">
        <div class="dash-left-side border-right p-0" id="menu-left">
            <ul class="list-menu dropright">
                @{
                    foreach (var item in ViewBag.modules)
                    {
                        string disReport = item.ReportURL == "#" ? "disabled" : "";

                        <li class="menu-item" onclick="print(this)">
                            <i class="@item.Icon"></i>
                            <p class="mb-0 ml-3">@item.Name</p>
                            <i class="fas fa-caret-up"></i>
                        </li>
                        <div class="my-dropdown">
                            @{
                                foreach (var elem in item.Options)
                                {
                                    string disabled = elem.Enabled ? "" : "disabled";

                                    <a class="dropdown-item @disabled" href="@elem.URL"><i class="@elem.Icon"></i> @elem.Name</a>
                                }
                            }
                            <a class="dropdown-item @disReport" href="@item.ReportURL"><i class="fas fa-file"></i>  Reportes</a>
                        </div>
                    }
                }
                <li class="menu-item" onclick="print(this)">
                    <i class="fas fa-cog fa-spin"></i>
                    <p class="mb-0 ml-3">Configuración</p>
                    <i class="fas fa-caret-up"></i>
                </li>
                <div class="my-dropdown">
                    <a class="dropdown-item" href="/Usuarios/Index"><i class="fas fa-user"></i> Usuarios</a>
                    <a class="dropdown-item" href="/Conexiones/Index"><i class="fas fa-network-wired"></i> Conexiones</a>
                </div>
            </ul>
        </div>
        <div class="dash-right-side">
            <div class="container-fluid" style="padding: 5px 40px">
                <h2 class="mt-2">Estadísticas</h2>
                <div class="row mt-3">
                    <div class="col-sm-3 direct">
                        <div class="col-md-12 shadow rounded">
                            <h4>Inventario</h4>
                            <i class="fas fa-box"></i>
                            <a href="Inventario">Ir a Inventario <i class="fas fa-arrow-circle-right"></i></a>
                        </div>
                    </div>
                    <div class="col-sm-3 direct">
                        <div class="col-md-12 shadow rounded">
                            <h4>Ventas</h4>
                            <i class="fas fa-dollar-sign"></i>
                            <a href="Ventas">Ir a Ventas <i class="fas fa-arrow-circle-right"></i></a>
                        </div>
                    </div>
                    <div class="col-sm-3 direct">
                        <div class="col-md-12 shadow rounded">
                            <h4>Compras</h4>
                            <i class="fas fa-tags"></i>
                            <a href="Compras">Ir a Compras <i class="fas fa-arrow-circle-right"></i></a>
                        </div>
                    </div>
                    <div class="col-sm-3 direct">
                        <div class="col-md-12 shadow rounded">
                            <h4>Configuración</h4>
                            <i class="fas fa-cog fa-spin"></i>
                            <a href="#">Ir a Configuración <i class="fas fa-arrow-circle-right"></i></a>
                        </div>
                    </div>
                </div>
                <hr />
            </div>
        </div>
    </div>
</div>
<script>
    var capitalize = str => str.substring(0, 1).toLocaleUpperCase() + str.substring(1).toLocaleLowerCase();
    var btn = document.getElementById("icon-menu");
    var menu = document.getElementById("menu-left");
    var node = null;

    btn.addEventListener("click", hide);

    $(".dash-right-side").on("mousedown", function (event) {
        event.preventDefault();
    });

    $(".dash-right-side").on("contextmenu", function (event) {
        event.preventDefault();
    });

    function print(elem) {
        var elems = document.getElementsByClassName("my-dropdown");

        for (var item of elems) {
            $(item).animate({ width: 'hide' });
        }

        if (node != null) {
            node.classList.remove("selected");
        }

        elem.classList.add("selected");

        if (node != elem) {

            $(elem).next().animate({ width: 'show' });
            $(elem).next().css("display", "flex");
            $(elem).next().css("flex-direction", "column");

            menu.classList.add("active");
            node = elem;

        } else {

            node.classList.remove("selected");
            menu.classList.remove("active");
            node = null;

        }
    }

    function hide() {

        if (node != null) {
            node.classList.remove("selected");
            node = null;
        }

        menu.classList.toggle("active");

        var elems = document.getElementsByClassName("my-dropdown");

        for (var item of elems) {
            $(item).animate({ width: 'hide' });
        }
    }
</script>