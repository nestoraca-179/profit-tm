@{
    ViewBag.Title = "Cliente";
}
<style>
    .dash-right-side .container {
        height: 100%;
        max-width: 100%;
        padding: 5px;
        display: flex;
    }
    h3{
        margin: 0;
    }
    .container-list{
        flex: 1;
        overflow-y: auto;
        margin-right: 5px;
        padding-right: 5px;
    }
    .container-list .table td, .table th {
        padding: 5px;
        font-size: 14px;
    }
    .container-list .table thead {
        background: #13568a;
    }
    .container-form {
        flex: 3;
        background: #f9f9f9;
        border: solid 1px #b9b9b9;
    }
    .form-header {
        background: #13568a;
        padding: 10px 0;
        border-bottom: solid 3px #126fb9;
    }
    .form-buttons {
        background: #eeeded;
        padding: 10px;
    }
    .form-buttons .btn{
        padding: 5px 10px;
        font-size: 14px;
    }
    .buttons-next-prev {
        width: fit-content;
        display: flex;
        justify-content: space-between;
    }
    .form-body {
        background: #f9f9f9;
        display: none;
        flex-wrap: wrap;
    }
    .form-body > div {
        padding: 15px;
    }
    .form-body .left, .form-body .right {
        width: 50%;
    }
    .form-body .bottom{
        width: 100%;
        border-top: solid 1px #b9b9b9;
    }
    .controls{
        min-height: 40px;
        display: flex;
        justify-content: space-between;
        margin: 2px 0;
    }
    .controls label:not(.label-check){
        width: 150px;
        margin: 0;
        display: flex;
        align-items: center;
        font-size: 14px;
    }
    .controls input[type=text], .controls input[type=date] {
        width: auto;
        min-width: 300px;
        /*border: solid 1px #bdbdbd;*/
        border: 1px solid #ced4da;
        font-size: 14px;
    }
    .controls input[type=checkbox]{
        margin-right: 20px;
    }
    .controls select{
        min-width: 300px;
        border: 1px solid #ced4da;
        box-shadow: none;
        font-size: 14px;
    }
    label.label-check {
        margin: 0;
        font-size: 14px;
    }
    .input-search{
        max-width: 300px;
    }
    .input-search input{
        width: 100% !important;
        min-width: auto !important;
    }
    .form-tabs {
        overflow: hidden;
        display: flex;
    }
    .form-tabs button {
        flex: 1;
        background: #f9f9f9;
        color: #25224a;
        border: none;
        cursor: pointer;
        padding: 5px;
        transition: 0.3s;
        font-size: 17px;
    }
    .form-tabs button:hover, .form-tabs button.active {
        background-color: #E6E7FF;
        border-bottom: solid 2px #5157ff;
    }
</style>
<div class="container" ng-app="Clients" ng-controller="controller">
    <div class="container-list">
        <input type="text" id="input-clients" class="form-control" placeholder="Buscar cliente..." style="border: solid 1px #ced4da;" onkeyup="searchClient()" />
        <table class="table table-bordered table-hover table-striped" id="table-clients" style="margin-top: 5px;">
            <thead>
                <tr>
                    <th class="text-white">RIF</th>
                    <th class="text-white">Nombre</th>
                </tr>
            </thead>
            <tr ng-repeat="client in clients" style="cursor: pointer;">
                <td>{{ client.RIF }}</td>
                <td>{{ client.Name }}</td>
            </tr>
        </table>
    </div>
    <div class="container-form">
        <div class="form-header">
            <h3 class="text-center text-white">Cliente</h3>
        </div>
        <div class="form-buttons">
            <div class="buttons-next-prev">
                <button type="button" class="btn btn-primary" ng-click="prev()">
                    <i class="fas fa-arrow-left"></i>
                    Anterior
                </button>
                <div style="width: 10px;"></div>
                <button type="button" class="btn btn-success" ng-click="next()">
                    Siguiente
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
        <div class="form-tabs">
            <button type="button" class="tablinks active" onclick="openTab(event, 'general')">General</button>
            <button type="button" class="tablinks" onclick="openTab(event, 'ubicacion')">Ubicación</button>
            <button type="button" class="tablinks" onclick="openTab(event, 'credito')">Crédito y Saldos</button>
            <button type="button" class="tablinks" onclick="openTab(event, 'otros')">Otros</button>
            <button type="button" class="tablinks" onclick="openTab(event, 'adicionales')">Adicionales</button>
        </div>
        <div id="general" class="form-body" style="display: flex;">
            <div class="left">
                <div class="controls">
                    <label>Código</label>
                    <input type="text" class="form-control" id="id" ng-model="client.ID" />
                </div>
                <div class="controls">
                    <label>Nombre</label>
                    <input type="text" class="form-control" id="name" ng-model="client.Name" />
                </div>
                <div class="controls">
                    <label>Tipo</label>
                    <div class="input-search">
                        <input type="text" class="form-control" id="type" ng-model="client.Type.ID" />
                        <i class="fas fa-search" role="button" onclick="openModal(this, 'modalTypes')" data-name="type"></i>
                    </div>
                </div>
                <div class="controls">
                    <label>RIF</label>
                    <input type="text" class="form-control" id="rif" ng-model="client.RIF" />
                </div>
            </div>
            <div class="right">
                <div class="controls">
                    <label>Fecha de Registro</label>
                    <input type="date" class="form-control" id="fechaReg" ng-model="client.DateReg" />
                </div>
                <div class="controls">
                    <label class="label-check"><input type="checkbox" ng-model="client.Contrib" /> Contribuyente</label>
                </div>
                <div class="controls">
                    <label class="label-check"><input type="checkbox" ng-model="client.Disabled" /> Inactivo</label>
                </div>
            </div>
            <div class="bottom">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="controls">
                            <label>Segmento</label>
                            <div class="input-search">
                                <input type="text" class="form-control" id="segment" ng-model="client.Segment.ID" />
                                <i class="fas fa-search" role="button" onclick="openModal(this, 'modalSegments')" data-name="segment"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="controls">
                            <label>Vendedor</label>
                            <div class="input-search">
                                <input type="text" class="form-control" id="seller" ng-model="client.Seller.ID" />
                                <i class="fas fa-search" role="button" onclick="openModal(this, 'modalSellers')" data-name="seller"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="controls">
                            <label>Cuenta Ingr/Egr</label>
                            <div class="input-search">
                                <input type="text" class="form-control" id="account" ng-model="client.Account.ID" />
                                <i class="fas fa-search" role="button" onclick="openModal(this, 'modalAccounts')" data-name="account"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="controls">
                            <label>Teléfono</label>
                            <input type="text" class="form-control" id="phone" ng-model="client.Phone" />
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="controls">
                            <label>Fax</label>
                            <input type="text" class="form-control" id="fax" ng-model="client.Fax" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="controls">
                            <label>Email</label>
                            <input type="text" class="form-control" id="email" ng-model="client.Email" />
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="controls">
                            <label>Contacto</label>
                            <input type="text" class="form-control" id="respons" ng-model="client.Respons" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="controls">
                            <label>Email Alterno</label>
                            <input type="text" class="form-control" id="altEmail" ng-model="client.AltEmail" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="ubicacion" class="form-body">
            <div class="left">
                <div class="controls">
                    <label>País</label>
                    <div class="input-search">
                        <input type="text" class="form-control" id="country" ng-model="client.Country.ID" />
                        <i class="fas fa-search" role="button" onclick="openModal(this, 'modalCountries')" data-name="country"></i>
                    </div>
                </div>
                <div class="controls">
                    <label>Zona</label>
                    <div class="input-search">
                        <input type="text" class="form-control" id="zone" ng-model="client.Zone.ID" />
                        <i class="fas fa-search" role="button" onclick="openModal(this, 'modalZones')" data-name="zone"></i>
                    </div>
                </div>
            </div>
            <div class="right">
                <div class="controls">
                    <label>Ciudad</label>
                    <input type="text" class="form-control" id="city" ng-model="client.City" />
                </div> 
            </div>
            <div class="bottom">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="controls">
                            <label>Dirección</label>
                            <textarea class="form-control" id="address1" ng-model="client.Address1"></textarea>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="controls">
                            <label>Dirección Entrega</label>
                            <textarea class="form-control" id="delAddress" ng-model="client.DelAddress"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="credito" class="form-body">
            <div class="left">
                <div class="controls">
                    <label class="label-check"><input type="checkbox" ng-model="client.SinCred" /> Sin Crédito</label>
                </div>
                <div class="controls">
                    <label>Cond. Pago</label>
                    <div class="input-search">
                        <input type="text" class="form-control" id="cond" ng-model="client.Cond.ID" ng-disabled="client.SinCred" />
                        <i class="fas fa-search" role="button" onclick="openModal(this, 'modalConds')" data-name="cond"></i>
                    </div>
                </div>
            </div>
            <div class="right">
                <div class="controls">
                    <label>Límite</label>
                    <input type="text" class="form-control" id="montcre" ng-model="client.MontCre" ng-disabled="client.SinCred" />
                </div>
            </div>
            <div class="bottom">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="controls">
                            <label>Desc. P. Pago</label>
                            <input type="text" class="form-control" id="descppago" ng-model="client.DescPPago" />
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="controls">
                            <label>Desc. Glob.</label>
                            <input type="text" class="form-control" id="descglob" ng-model="client.DescGlob" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <h5 class="text-center mt-3 mb-3">Días de visita</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="controls">
                            <label class="label-check"><input type="checkbox" ng-model="client.Monday" /> Lunes</label>
                            <label class="label-check"><input type="checkbox" ng-model="client.Tuesday" /> Martes</label>
                            <label class="label-check"><input type="checkbox" ng-model="client.Wednesday" /> Miércoles</label>
                            <label class="label-check"><input type="checkbox" ng-model="client.Thursday" /> Jueves</label>
                            <label class="label-check"><input type="checkbox" ng-model="client.Friday" /> Viernes</label>
                            <label class="label-check"><input type="checkbox" ng-model="client.Saturday" /> Sábado</label>
                            <label class="label-check"><input type="checkbox" ng-model="client.Sunday" /> Domingo</label>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-sm-6">
                        <div class="controls">
                            <label>Horario Caja</label>
                            <input type="text" class="form-control" id="horarcaja" ng-model="client.HorarCaja" />
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="controls">
                            <label>Frecuencia</label>
                            <input type="text" class="form-control" id="frecuvist" ng-model="client.FrecuVist" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="controls">
                            <label>Comentario</label>
                            <textarea class="form-control" id="comment" ng-model="client.Comment"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="otros" class="form-body">
            <div class="left">
                <div class="controls">
                    <label>Tipo de persona</label>
                    <select ng-model="client.TipPer">
                        <option value="1">(PNR) Persona Natural Residente</option>
                        <option value="2">(PNNR) Persona Natural No Residente</option>
                        <option value="3">(PJD) Persona Jurídica Domiciliada</option>
                        <option value="4">(PJND) Persona Jurídica No Domiciliada</option>
                        <option value="5">Exenta</option>
                        <option value="6">Tesorería Nacional</option>
                        <option value="7">Otros 1</option>
                        <option value="8">Otros 2</option>
                    </select>
                </div>
                <div class="controls">
                    <label>Tabulador de I.S.L.R</label>
                    <input type="text" class="form-control" id="tab" ng-model="client.CoTab" />
                </div>
                <div class="controls">
                    
                </div>
            </div>
            <div class="right">
                <div class="controls">
                    <label class="label-check"><input type="checkbox" ng-model="client.ContribuE" ng-change="client.PorcEsp = 0" /> Contribuyente Especial</label>
                    <label class="label-check"><input type="checkbox" ng-model="client.ReteRegisDoc" ng-disabled="!client.ContribuE" /> Retener al registrar documento</label>
                </div>
                <div class="controls">
                    <label>Retención (%)</label>
                    <input type="text" class="form-control" id="tab" ng-model="client.PorcEsp" ng-disabled="!client.ContribuE" />
                </div>
            </div>
        </div>
        <div id="adicionales" class="form-body">
            <div class="left">
                <div class="controls">
                    <label>Campo 1</label>
                    <input type="text" class="form-control" id="tab" ng-model="client.ExtraFields[0]" />
                </div>
                <div class="controls">
                    <label>Campo 3</label>
                    <input type="text" class="form-control" id="tab" ng-model="client.ExtraFields[2]" />
                </div>
                <div class="controls">
                    <label>Campo 5</label>
                    <input type="text" class="form-control" id="tab" ng-model="client.ExtraFields[4]" />
                </div>
                <div class="controls">
                    <label>Campo 7</label>
                    <input type="text" class="form-control" id="tab" ng-model="client.ExtraFields[6]" />
                </div>
            </div>
            <div class="right">
                <div class="controls">
                    <label>Campo 2</label>
                    <input type="text" class="form-control" id="tab" ng-model="client.ExtraFields[1]" />
                </div>
                <div class="controls">
                    <label>Campo 4</label>
                    <input type="text" class="form-control" id="tab" ng-model="client.ExtraFields[3]" />
                </div>
                <div class="controls">
                    <label>Campo 6</label>
                    <input type="text" class="form-control" id="tab" ng-model="client.ExtraFields[5]" />
                </div>
                <div class="controls">
                    <label>Campo 8</label>
                    <input type="text" class="form-control" id="tab" ng-model="client.ExtraFields[7]" />
                </div>
            </div>
        </div>
    </div>
    <!-- Modal 1 -->
    <div class="modal fade" id="modalTypes" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document" style="max-width: 800px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Buscar Tipo</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="max-height: 450px; overflow-y: auto">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Buscar tipo..." onkeyup="search('modalTypes')" />
                    </div>
                    <table class="table table-bordered table-hover table-striped mt-3" id="results">
                        @{
                            foreach (var elem in ViewBag.types)
                            {
                                <tr style="cursor: pointer" onclick="selectRow(this)">
                                    <td>@elem.ID</td>
                                    <td>@elem.Name</td>
                                </tr>
                            }
                        }
                    </table>
                    <input type="hidden" id="name-input" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="saveRow('modalTypes')">Seleccionar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal 2 -->
    <div class="modal fade" id="modalZones" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document" style="max-width: 800px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Buscar Zona</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="max-height: 450px; overflow-y: auto">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Buscar zona..." onkeyup="search('modalZones')" />
                    </div>
                    <table class="table table-bordered table-hover table-striped mt-3" id="results">
                        @{
                            foreach (var elem in ViewBag.zones)
                            {
                                <tr style="cursor: pointer" onclick="selectRow(this)">
                                    <td>@elem.ID</td>
                                    <td>@elem.Name</td>
                                </tr>
                            }
                        }
                    </table>
                    <input type="hidden" id="name-input" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="saveRow('modalZones')">Seleccionar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal 3 -->
    <div class="modal fade" id="modalAccounts" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document" style="max-width: 800px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Buscar Cuenta de Ingr/Egr</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="max-height: 450px; overflow-y: auto">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Buscar cuenta..." onkeyup="search('modalAccounts')" />
                    </div>
                    <table class="table table-bordered table-hover table-striped mt-3" id="results">
                        @{
                            foreach (var elem in ViewBag.accounts)
                            {
                                <tr style="cursor: pointer" onclick="selectRow(this)">
                                    <td>@elem.ID</td>
                                    <td>@elem.Name</td>
                                </tr>
                            }
                        }
                    </table>
                    <input type="hidden" id="name-input" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="saveRow('modalAccounts')">Seleccionar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal 4 -->
    <div class="modal fade" id="modalCountries" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document" style="max-width: 800px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Buscar País</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="max-height: 450px; overflow-y: auto">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Buscar pais..." onkeyup="search('modalCountries')" />
                    </div>
                    <table class="table table-bordered table-hover table-striped mt-3" id="results">
                        @{
                            foreach (var elem in ViewBag.countries)
                            {
                                <tr style="cursor: pointer" onclick="selectRow(this)">
                                    <td>@elem.ID</td>
                                    <td>@elem.Name</td>
                                </tr>
                            }
                        }
                    </table>
                    <input type="hidden" id="name-input" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="saveRow('modalCountries')">Seleccionar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal 5 -->
    <div class="modal fade" id="modalSegments" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document" style="max-width: 800px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Buscar Segmento</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="max-height: 450px; overflow-y: auto">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Buscar segmento..." onkeyup="search('modalSegments')" />
                    </div>
                    <table class="table table-bordered table-hover table-striped mt-3" id="results">
                        @{
                            foreach (var elem in ViewBag.segments)
                            {
                                <tr style="cursor: pointer" onclick="selectRow(this)">
                                    <td>@elem.ID</td>
                                    <td>@elem.Name</td>
                                </tr>
                            }
                        }
                    </table>
                    <input type="hidden" id="name-input" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="saveRow('modalSegments')">Seleccionar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal 6 -->
    <div class="modal fade" id="modalSellers" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document" style="max-width: 800px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Buscar Vendedor</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="max-height: 450px; overflow-y: auto">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Buscar vendedor..." onkeyup="search('modalSellers')" />
                    </div>
                    <table class="table table-bordered table-hover table-striped mt-3" id="results">
                        @{
                            foreach (var elem in ViewBag.sellers)
                            {
                                <tr style="cursor: pointer" onclick="selectRow(this)">
                                    <td>@elem.ID</td>
                                    <td>@elem.Name</td>
                                </tr>
                            }
                        }
                    </table>
                    <input type="hidden" id="name-input" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="saveRow('modalSellers')">Seleccionar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal 7 -->
    <div class="modal fade" id="modalConds" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document" style="max-width: 800px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Buscar Cond. Pago</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="max-height: 450px; overflow-y: auto">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Buscar cond. pago..." onkeyup="search('modalConds')" />
                    </div>
                    <table class="table table-bordered table-hover table-striped mt-3" id="results">
                        @{
                            foreach (var elem in ViewBag.conds)
                            {
                                <tr style="cursor: pointer" onclick="selectRow(this)">
                                    <td>@elem.ID</td>
                                    <td>@elem.Name</td>
                                </tr>
                            }
                        }
                    </table>
                    <input type="hidden" id="name-input" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="saveRow('modalConds')">Seleccionar</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/Content/angular-min.js"></script>
<script>
    var app = angular.module("Clients", []);
    var clients = @Html.Raw(Json.Encode(@ViewBag.clients));

    for (var item of clients) {
        item.DateReg = new Date(parseInt(item.DateReg.substr(6)));
        item.DateIn = new Date(parseInt(item.DateIn.substr(6)));
        item.DateMo = new Date(parseInt(item.DateMo.substr(6)));
    }

    console.log(clients);

    app.controller("controller", function ($scope, $http) {

        $scope.clients = clients;
        $scope.index = 0;

        $scope.client = clients[$scope.index];

        $scope.next = function () {
            if ($scope.index == (clients.length - 1)) {
                $scope.index = 0;
            } else {
                $scope.index++;
            }

            $scope.client = clients[$scope.index];
        }

        $scope.prev = function () {
            if ($scope.index == 0) {
                $scope.index = clients.length - 1;
            } else {
                $scope.index--;
            }

            $scope.client = clients[$scope.index];
        }

    });

    function openModal(elem, modal) {

        var previous = elem.previousElementSibling;

        if (!previous.disabled) {

            $("#" + modal).find("#name-input").val($(elem).data("name"));
            $("#" + modal).modal("show");

        }
    }

    function search(modal) {
        var value = $("#" + modal).find("input[type=text]").val().toLowerCase(),
            table = $("#" + modal).find("#results")[0];

        for (var i = 0; i < table.rows.length; i++) {

            var row = table.rows[i];
            var elems = row.getElementsByTagName("td");

            var val1 = elems[0].innerHTML.toLocaleLowerCase(), val2 = elems[1].innerHTML.toLocaleLowerCase();

            if (!val1.includes(value) && !val2.includes(value))
                row.style.display = "none";
            else
                row.style.display = "";
        }
    }

    function selectRow(elem) {
        var previous = document.getElementsByClassName("selected-row")[0];

        if (previous != null) {
            previous.classList.remove("selected-row");
        }

        elem.classList.add("selected-row");
    }

    function saveRow(modal) {
        var item = document.getElementsByClassName("selected-row")[0];

        if (item != null) {
            var elem = item.children[0],
                value = elem.innerHTML,
                input = $("#" + modal).find("#name-input").val();

            $("#" + input).val(value.trim());
            $(".selected-row")[0].classList.remove("selected-row");
            $("#" + modal).find("input[type=text]").val("");
            $("#" + modal).find("button[name=search-btn]").trigger("click");

            $("#" + modal).modal("hide");
        } else {
            alert("Debes seleccionar un item");
        }
    }

    function openTab(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("form-body");

        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }

        tablinks = document.getElementsByClassName("tablinks");

        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }

        document.getElementById(tabName).style.display = "flex";
        evt.currentTarget.className += " active";
    }

    function searchClient() {
        var value = $("#input-clients").val().toLowerCase(),
            table = $("#table-clients")[0];

        for (var i = 1; i < table.rows.length; i++) {

            var row = table.rows[i];
            var elems = row.getElementsByTagName("td");

            var val1 = elems[0].innerHTML.toLocaleLowerCase(), val2 = elems[1].innerHTML.toLocaleLowerCase();

            if (!val1.includes(value) && !val2.includes(value))
                row.style.display = "none";
            else
                row.style.display = "";
        }
    }

</script>