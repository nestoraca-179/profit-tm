<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - ProfitTM</title>
    <link rel="stylesheet" href="~/Content/bootstrap.min.css" />
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link rel="stylesheet" href="~/Content/datatables.css" />
    <link rel="stylesheet" href="~/Content/Site.css" />
    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    <script src="~/Scripts/popper.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/Content/datatables.js"></script>
</head>
<body>
    <div class="container-fluid p-0">
        <main role="main">
            <header class="container-fluid">
                <div class="row">
                    <div class="col-sm-2 header-left-side text-white">
                        <i class="fas fa-bars icon-menu" id="icon-menu"></i>
                        <a href="/Home/@ViewData["home"]">Profit Plus TM</a>
                    </div>
                    <div class="col-sm-10 header-right-side">
                        <div class="user-active" role="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-user icon-user"></i>
                            <p class="mb-0">@ViewBag.user.Descrip</p>
                        </div>
                        <div style="width: 225px; text-align: center;" class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a style="text-align: center; text-decoration: none;" href="/Account/Logout">Cerrar Sesión</a>
                        </div>
                    </div>
                </div>
            </header>
            <div class="container-fluid p-0">
                <div class="dash-container" id="dash-container">
                    <div class="dash-left-side border-right p-0" id="menu-left">
                        <ul class="list-menu dropright">
                            @{
                                foreach (var item in ViewBag.modules)
                                {
                                    string disReport = item.ReportURL == "#" ? "disabled" : "";

                                    <li class="menu-item" onclick="print(this)">
                                        <i class="@item.Icon"></i>
                                        <p class="mb-0 ml-3">@item.Name</p>
                                        <i class="fas fa-caret-up"></i>
                                    </li>
                                    <div class="my-dropdown">
                                        @{
                                            foreach (var elem in item.Options)
                                            {
                                                string disabled = elem.Enabled ? "" : "disabled";

                                                <a class="dropdown-item @disabled" href="@elem.URL"><i class="@elem.Icon"></i> @elem.Name</a>
                                            }
                                        }
                                        <a class="dropdown-item @disReport" href="@item.ReportURL"><i class="fas fa-file"></i>  Reportes</a>
                                    </div>
                                }
                            }
                            <li class="menu-item" onclick="print(this)">
                                <i class="fas fa-cog fa-spin"></i>
                                <p class="mb-0 ml-3">Configuración</p>
                                <i class="fas fa-caret-up"></i>
                            </li>
                            <div class="my-dropdown">
                                <a class="dropdown-item" href="/Usuarios/Index"><i class="fas fa-user"></i> Usuarios</a>
                            </div>
                        </ul>
                    </div>
                    <div class="dash-right-side">
                        @RenderBody()
                    </div>
                </div>
            </div>
        </main>
    </div>
    <footer class="border-top footer text-muted footer-bottom" style="display: flex;">
        <div class="container" style="display: flex;">
            &copy; 2021 - <a href="http://cdrconsultores.com/" target="_blank">CDR Consultores C.A.</a></p>
        </div>
    </footer>
    <script>
        var btn = document.getElementById("icon-menu");
        var menu = document.getElementById("menu-left");
        var node = null;

        /*$(document).ready(function () {
            if (document.getElementById("results-table") != null) {

                $('#results-table').DataTable({
                    "language": {
                        "lengthMenu": "Mostrar _MENU_ registros por página",
                        "info": "Página _PAGE_ de _PAGES_ - Mostrando _END_ de _TOTAL_ registros",
                        "infoEmpty": "Mostrando _END_ de _TOTAL_ registros",
                        "infoFiltered": "(filtrado de un total de _MAX_ registros)",
                        "processing": "Procesando...",
                        "search": "Buscar:   ",
                        "zeroRecords": "No se encontraron resultados",
                        "paginate": {
                            "first": "Primero",
                            "last": "Ultimo",
                            "next": "Siguiente",
                            "previous": "Anterior"
                        },
                    },
                    "lengthMenu": [10, 25, 50, 75, 100]
                });

            }
        });*/

        btn.addEventListener("click", hide);

        function print(elem) {

            $(".my-dropdown").slideUp();

            if (node != null) {
                $(node).removeClass("selected");
                $(node).children("i.fa-caret-up").hide();
            }

            $(elem).addClass("selected");

            if (node != elem) {

                $(elem).next().slideDown();
                $(elem).next().css("display", "flex");
                $(elem).next().css("flex-direction", "column");
                $(elem).children("i.fa-caret-up").show();
                node = elem;

            } else {
                $(elem).removeClass("selected");
                $(elem).children("i.fa-caret-up").hide();
                node = null;
            }
        }

        function hide() {

            if (node != null) {
                $(node).removeClass("selected");
                node = null;
            }

            menu.classList.toggle("active");

            $(".my-dropdown").slideUp();
            $("i.fa-caret-up").hide();
        }

    </script>
</body>
</html>